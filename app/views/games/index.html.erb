<div class="container">
  <h1>Список всех игр</h1>

  <table class="table table-hover table-sm">
    <thead class="thead-dark">
      <tr>
        <th>Игроки</th>
        <th>Тип</th>
        <th>Очки</th>
        <th>Счёт</th>
        <th></th>
      </tr>
    </thead>

    <% @games.each do |game| %>
      <tr class='clickable-row' data-href='<%= game_path(game) %>' style='cursor: pointer'>
        <td>
          <% games_stats = GamesStat.preload(:player).where(game_id: game.id) %>
          <% games_stats.each do |stat| %>

              <% if stat.player_id == game.player_won %>
                <b><%= stat.player.name %></b>
              <% else %>
                <%= stat.player.name %>
              <% end %>

          <% end %>
        </td>
        <td><%= game.game_type %></td>
        <td><%= game.points %></td>
        <td><%= game.score %></td>
        <td><%= game.state %></td>
      </tr>
    <% end %>
  </table>

  <br></br>

  <%= link_to 'Новая игра', new_game_path %>
  <%= link_to 'Назад', welcome_index_path %>
</div>

<script type="text/javascript">
  jQuery(document).ready(function($) {
    $(".clickable-row").click(function() {
      window.location = $(this).data("href");
    });
  });
</script>
